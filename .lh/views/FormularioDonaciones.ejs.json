{
    "sourceFile": "views/FormularioDonaciones.ejs",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1748450644146,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1748450644146,
            "name": "Commit-0",
            "content": "<!DOCTYPE html>\r\n<html lang=\"es\">\r\n<head>\r\n  <meta charset=\"UTF-8\" />\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\r\n  <title><%= title || 'Formulario de Donación' %></title>\r\n  <link rel=\"stylesheet\" href=\"/styles/FormularioDonaciones.css\" />\r\n</head>\r\n<body>\r\n<div class=\"formulario\">\r\n  <h1>Formulario de Donación</h1>\r\n\r\n  <% if (error) { %>\r\n    <p style=\"color: red; font-weight: bold;\"><%= error %></p>\r\n  <% } %>\r\n  <% if (success) { %>\r\n    <p style=\"color: green; font-weight: bold;\"><%= success %></p>\r\n  <% } %>\r\n\r\n  <form id=\"formDonacion\" class=\"contenedor\" method=\"POST\" action=\"/donaciones/guardar\" novalidate>\r\n    <!-- Campo oculto para el ID del usuario -->\r\n    <input type=\"hidden\" name=\"id_usuario\" value=\"<%= user?.id || '' %>\" />\r\n\r\n    <!-- Información Personal -->\r\n    <div class=\"seccion\">\r\n      <h2>Información Personal</h2>\r\n      <label for=\"nombre\">Nombre completo:</label>\r\n      <input type=\"text\" id=\"nombre\" name=\"nombre\" readonly placeholder=\"Ej. Juan Pérez\" value=\"<%= user?.nombre || '' %>\" />\r\n      <span class=\"error\" id=\"errorNombre\"></span>\r\n\r\n      <label for=\"email\">Correo electrónico:</label>\r\n      <input type=\"email\" id=\"email\" name=\"email\" readonly placeholder=\"Ej. correo@ejemplo.com\" value=\"<%= user?.correo || '' %>\" />\r\n      <span class=\"error\" id=\"errorEmail\"></span>\r\n    </div>\r\n\r\n    <!-- Donación Económica -->\r\n    <div class=\"seccion\">\r\n      <h2>Donación Económica</h2>\r\n      <label for=\"monto\">Monto a donar:</label>\r\n      <input type=\"number\" id=\"monto\" name=\"monto\" placeholder=\"0.00\" step=\"0.01\" min=\"0\" value=\"<%= formData?.monto || '' %>\" />\r\n      <span class=\"error\" id=\"errorMonto\"></span>\r\n\r\n      <label>Método de pago:</label>\r\n      <div class=\"checkbox-group\">\r\n        <label>\r\n          <input type=\"radio\" name=\"metodoPago\" value=\"tarjeta\" <%= formData?.metodoPago === 'tarjeta' ? 'checked' : '' %> />\r\n          Tarjeta de crédito/débito\r\n        </label>\r\n        <label>\r\n          <input type=\"radio\" name=\"metodoPago\" value=\"transferencia\" <%= formData?.metodoPago === 'transferencia' ? 'checked' : '' %> />\r\n          Transferencia bancaria\r\n        </label>\r\n        <label>\r\n          <input type=\"radio\" name=\"metodoPago\" value=\"paypal\" <%= formData?.metodoPago === 'paypal' ? 'checked' : '' %> />\r\n          PayPal\r\n        </label>\r\n        <label>\r\n          <input type=\"radio\" name=\"metodoPago\" value=\"otro\" <%= formData?.metodoPago === 'otro' ? 'checked' : '' %> />\r\n          Otro\r\n        </label>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Donación de Materiales -->\r\n    <div class=\"seccion\">\r\n      <h2>Donación de Materiales</h2>\r\n      <label>Tipo de material:</label>\r\n      <div class=\"checkbox-group\">\r\n        <label>\r\n          <input type=\"checkbox\" name=\"material[]\" value=\"comida\" <%= formData?.material?.includes('comida') ? 'checked' : '' %> />\r\n          Pienso / Comida húmeda\r\n        </label>\r\n        <label>\r\n          <input type=\"checkbox\" name=\"material[]\" value=\"mantas\" <%= formData?.material?.includes('mantas') ? 'checked' : '' %> />\r\n          Mantas / Camas\r\n        </label>\r\n        <label>\r\n          <input type=\"checkbox\" name=\"material[]\" value=\"medicamentos\" <%= formData?.material?.includes('medicamentos') ? 'checked' : '' %> />\r\n          Medicamentos / Material veterinario\r\n        </label>\r\n        <label>\r\n          <input type=\"checkbox\" name=\"material[]\" value=\"juguetes\" <%= formData?.material?.includes('juguetes') ? 'checked' : '' %> />\r\n          Juguetes / Correas\r\n        </label>\r\n        <label>\r\n          <input type=\"checkbox\" name=\"material[]\" value=\"otro\" <%= formData?.material?.includes('otro') ? 'checked' : '' %> />\r\n          Otro\r\n        </label>\r\n      </div>\r\n\r\n      <label for=\"materialOtro\">Otro (especificar):</label>\r\n      <textarea id=\"materialOtro\" name=\"materialOtro\" rows=\"3\" placeholder=\"Describe otros materiales...\"><%= formData?.materialOtro || '' %></textarea>\r\n    </div>\r\n\r\n    <!-- Botones -->\r\n    <div class=\"boton-contenedor\">\r\n      <button type=\"submit\">Enviar Donación</button>\r\n      <a href=\"/menu\" class=\"boton-volver\">Volver al Menú</a>\r\n    </div>\r\n  </form>\r\n</div>\r\n\r\n<script>\r\n  const form = document.getElementById('formDonacion');\r\n\r\n  form.addEventListener('submit', function (event) {\r\n    let valid = true;\r\n\r\n    // Validar monto\r\n    const montoValue = document.getElementById('monto').value;\r\n    const monto = parseFloat(montoValue);\r\n\r\n    if (!montoValue || isNaN(monto) || monto <= 0) {\r\n      document.getElementById('errorMonto').textContent = 'Ingrese un monto válido mayor a 0.';\r\n      valid = false;\r\n    }\r\n\r\n    // Validar método de pago\r\n    const radios = document.getElementsByName('metodoPago');\r\n    let metodoPagoSeleccionado = false;\r\n    for (let i = 0; i < radios.length; i++) {\r\n      if (radios[i].checked) {\r\n        metodoPagoSeleccionado = true;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (!metodoPagoSeleccionado) {\r\n      alert('Seleccione un método de pago.');\r\n      valid = false;\r\n    }\r\n\r\n    if (!valid) {\r\n      event.preventDefault();\r\n    }\r\n  });\r\n</script>\r\n</body>\r\n</html>\r\n"
        }
    ]
}